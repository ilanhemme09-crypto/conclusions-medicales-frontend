<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Conclusions M√©dicales</title>
<style>
*{margin:0;padding:0;box-sizing:border-box}
body{font-family:Arial,sans-serif;background:#1a2332;color:#e0e0e0;padding:20px}
.container{max-width:1600px;margin:0 auto;display:grid;grid-template-columns:400px 1fr;gap:20px}
.sidebar{background:linear-gradient(135deg,#8b1538 0%,#5a0f26 100%);border-radius:12px;padding:25px;border:3px solid #c41e3a}
.sidebar-title{font-size:20px;font-weight:bold;color:white;margin-bottom:20px}
.section-title{font-size:14px;font-weight:bold;color:#6ba3ff;margin:20px 0 10px;text-transform:uppercase}
.api-status{padding:10px;border-radius:6px;margin-bottom:20px;font-size:13px;text-align:center}
.api-status.connected{background:#1e4620;color:#4ade80;border:1px solid #4ade80}
.api-status.disconnected{background:#4a1f1f;color:#ef4444;border:1px solid #ef4444}
.categories-grid{display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-bottom:10px}
.category-btn{padding:15px;background:#2d3f54;border:2px solid #3d5571;border-radius:8px;color:white;font-size:14px;font-weight:500;cursor:pointer;transition:all .3s}
.category-btn:hover{background:#3d5571}
.category-btn.active{background:#5a7ba6;border-color:#6ba3ff}
.motifs-list{display:none;margin:5px 0 10px;padding:8px;background:rgba(45,63,84,.3);border-left:3px solid #6ba3ff;border-radius:4px}
.motifs-list.active{display:block}
.motif-btn{width:100%;padding:8px;margin-bottom:4px;background:#2d3f54;border:2px solid #3d5571;border-radius:6px;color:white;font-size:12px;cursor:pointer;text-align:left;transition:all .3s}
.motif-btn:hover{background:#3d5571}
.motif-btn.principal{background:#16a34a;border-color:#22c55e;font-weight:bold}
.motif-btn.secondaire{background:#3d5571;border-color:#6ba3ff}
.generate-btn{width:100%;padding:15px;background:#16a34a;color:white;border:none;border-radius:8px;font-size:16px;font-weight:600;cursor:pointer;margin:10px 0;transition:all .3s}
.generate-btn:disabled{opacity:.5;cursor:not-allowed}
.generate-btn:hover:not(:disabled){background:#22c55e}
.module{background:transparent;border:2px solid #4a90e2;border-radius:12px;padding:25px;margin-bottom:20px;transition:all .3s}
.module:hover{border-color:#6ba3ff;box-shadow:0 0 15px rgba(106,163,255,.4)}
.module-header{font-size:18px;font-weight:bold;color:#6ba3ff;margin-bottom:20px;display:flex;justify-content:space-between;align-items:flex-start;flex-wrap:wrap;gap:10px}
.module-title{flex:1}
.bulles-container{display:flex;flex-wrap:wrap;gap:8px}
.bulle-btn{padding:8px 16px;background:#ea580c;border:2px solid #f97316;border-radius:6px;color:white;cursor:pointer;font-size:13px;font-weight:500;transition:all .3s;display:inline-flex;align-items:center;gap:6px}
.bulle-btn:hover{background:#f97316;transform:translateY(-2px)}
.module-content{color:#e0e0e0;font-size:15px;line-height:1.8}
.module-line{display:block;margin-bottom:12px;line-height:1.6}
.conduite-line{display:flex;align-items:flex-start;gap:10px;margin-bottom:10px;padding:10px;background:rgba(45,63,84,.3);border-radius:6px;transition:all .2s}
.conduite-line:hover{background:rgba(45,63,84,.5)}
.conduite-number{min-width:35px;font-weight:bold;color:#6ba3ff;font-size:16px;flex-shrink:0}
.conduite-text{flex:1;color:#e0e0e0;line-height:1.6}
.conduite-actions{display:flex;gap:5px;flex-shrink:0}
.action-icon{width:32px;height:32px;border-radius:4px;border:none;cursor:pointer;font-size:16px;transition:all .2s;color:white}
.action-up{background:#3b82f6}
.action-down{background:#3b82f6}
.action-delete{background:#ef4444}
.action-icon:hover{transform:scale(1.1)}
.ordonnances-section{margin-top:20px;padding-top:20px;border-top:2px solid #4a90e2}
.ordo-btn{display:inline-block;padding:10px 20px;background:#2563eb;color:white;border-radius:6px;margin:5px;cursor:pointer;font-size:14px;transition:all .3s;border:none}
.ordo-btn:hover{background:#1d4ed8}
.ordo-btn.all{background:#16a34a}
.codes-section{background:linear-gradient(135deg,#7c3aed 0%,#6d28d9 100%);border:2px solid #8b5cf6;border-radius:12px;padding:20px;margin-top:20px}
.codes-section h3{color:white;margin-bottom:15px}
.code-item{background:rgba(255,255,255,.1);padding:10px;border-radius:6px;margin-bottom:10px;color:white}
.xxxx{background:#fbbf24;padding:3px 8px;border-radius:4px;cursor:pointer;border:2px dashed #f59e0b;color:#1a2332;font-weight:bold;display:inline-block}
.xxxx:hover{background:#f59e0b;color:white}
.modal{display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.8);z-index:1000;justify-content:center;align-items:center;padding:20px}
.modal.active{display:flex}
.modal-content{background:#2d3f54;border:2px solid #4a90e2;border-radius:12px;padding:30px;max-width:900px;width:100%;max-height:85vh;overflow-y:auto;color:white}
.modal-header{font-size:20px;font-weight:bold;margin-bottom:20px;color:#6ba3ff;display:flex;justify-content:space-between;align-items:center}
.modal-close{cursor:pointer;font-size:28px;color:#ef4444}
.modal-bulle{background:#ea580c;border:3px solid #f97316}
.modal-bulle .modal-header{color:white}
.bulle-content{background:rgba(0,0,0,.3);padding:15px;border-radius:6px;color:white;line-height:1.8;white-space:pre-wrap}
.ordo-filters{display:grid;grid-template-columns:1fr 1fr;gap:15px;margin-bottom:25px}
.ordo-filter label{font-weight:bold;color:#6ba3ff;font-size:14px;margin-bottom:6px;display:block}
.ordo-filter select{width:100%;padding:10px;background:#1a2332;border:2px solid #4a90e2;border-radius:6px;color:white;font-size:14px}
.ordo-item{background:#1a2332;border:2px solid #4a90e2;border-radius:8px;padding:15px;cursor:pointer;margin-bottom:10px;transition:all .3s}
.ordo-item:hover{border-color:#6ba3ff;background:#243447}
.ordo-item-header{font-weight:bold;color:#6ba3ff;margin-bottom:8px}
.modal-input{width:100%;padding:12px;background:#1a2332;border:2px solid #4a90e2;border-radius:6px;color:white;font-size:14px;margin-bottom:15px}
.modal-buttons{display:flex;gap:10px;justify-content:flex-end;margin-top:15px}
.modal-btn{padding:12px 24px;border:none;border-radius:6px;cursor:pointer;font-size:14px;font-weight:600}
.modal-btn-primary{background:#16a34a;color:white}
.modal-btn-secondary{background:#4a5568;color:white}
.floating-actions{position:fixed;bottom:30px;right:30px;display:flex;gap:10px}
.action-btn{width:56px;height:56px;border-radius:50%;border:2px solid #16a34a;background:#16a34a;color:white;font-size:20px;cursor:pointer;transition:all .3s}
.action-btn:hover{transform:translateY(-2px)}
.action-btn.secondary{background:#6b7280;border-color:#6b7280}
.empty-state{text-align:center;padding:80px 20px;color:#6b7280}
.toast{position:fixed;bottom:20px;right:20px;background:#1a2332;border:2px solid #4a90e2;color:white;padding:16px 24px;border-radius:8px;z-index:2000;animation:slideIn .3s}
@keyframes slideIn{from{transform:translateX(400px);opacity:0}to{transform:translateX(0);opacity:1}}
</style>
</head>
<body>
<div class="container">
<div class="sidebar">
<div class="sidebar-title">üìã S√©lection</div>
<div id="apiStatus" class="api-status disconnected">‚ùå D√©connect√©</div>
<button id="generateTop" class="generate-btn" disabled>üîÑ G√©n√©rer</button>
<div class="section-title">Cat√©gorie Principale</div>
<div class="categories-grid" id="categoriesGrid"></div>
<div id="motifsMainContainer"></div>
<div id="secondarySection" style="display:none">
<div class="section-title">Cat√©gories Secondaires</div>
<div class="categories-grid" id="categoriesSecondaryGrid"></div>
<div id="motifsSecondaryContainer"></div>
</div>
<button id="generateBottom" class="generate-btn" disabled>üîÑ G√©n√©rer</button>
</div>
<div id="resultContainer">
<div class="empty-state">
<div style="font-size:64px;margin-bottom:20px">üìù</div>
<h3>Aucune conclusion g√©n√©r√©e</h3>
<p>S√©lectionnez un motif principal et cliquez sur "G√©n√©rer"</p>
</div>
</div>
</div>
<div id="xxxxModal" class="modal"></div>
<div id="bulleModal" class="modal"></div>
<div id="ordoModal" class="modal"></div>
<div id="allOrdosModal" class="modal"></div>
<div class="floating-actions" style="display:none" id="floatingActions">
<button class="action-btn secondary" onclick="resetAll()">üîÑ</button>
<button class="action-btn" onclick="copyAll()">üìã</button>
</div>
<script>
const API_URL='https://conclusions-medicales-api-1oa1.onrender.com';
let state={categories:[],motifPrincipal:null,motifsSecondaires:[],conclusion:null,conduiteLines:[],allOrdonnances:[]};

document.addEventListener('DOMContentLoaded',()=>{
checkAPI();
loadCategories();
document.getElementById('generateTop').onclick=generateConclusion;
document.getElementById('generateBottom').onclick=generateConclusion;
});

async function checkAPI(){
try{
const r=await fetch(`${API_URL}/health`);
const d=await r.json();
const s=document.getElementById('apiStatus');
if(d.status==='healthy'){
s.className='api-status connected';
s.textContent='‚úÖ Connect√©';
}
}catch(e){}
}

async function loadCategories(){
try{
const r=await fetch(`${API_URL}/categories`);
state.categories=await r.json();
renderCategories();
}catch(e){}
}

function renderCategories(){
const mainHtml=state.categories.map(cat=>`
<button class="category-btn" onclick="toggleCategory('${cat.table_name}','${cat.nom}',this,'main')">
${cat.nom}
</button>
<div id="motifs-main-${cat.table_name}" class="motifs-list"></div>
`).join('');

const secHtml=state.categories.map(cat=>`
<button class="category-btn" onclick="toggleCategory('${cat.table_name}','${cat.nom}',this,'secondary')">
${cat.nom}
</button>
<div id="motifs-sec-${cat.table_name}" class="motifs-list"></div>
`).join('');

document.getElementById('categoriesGrid').innerHTML=mainHtml;
document.getElementById('categoriesSecondaryGrid').innerHTML=secHtml;
}

async function toggleCategory(tableName,nomCategorie,btnElement,type){
const containerId=type==='main'?`motifs-main-${tableName}`:`motifs-sec-${tableName}`;
const container=document.getElementById(containerId);
const isActive=container.classList.contains('active');

if(isActive){
container.classList.remove('active');
btnElement.classList.remove('active');
}else{
btnElement.classList.add('active');
container.classList.add('active');

if(!container.innerHTML){
try{
const r=await fetch(`${API_URL}/motifs/${tableName}`);
const motifs=await r.json();
container.innerHTML=motifs.map(motif=>`
<button class="motif-btn" onclick="selectMotif('${tableName}','${motif.id}','${motif.nom_motif.replace(/'/g,"\\'")}','${type}',this)">
${motif.nom_motif}
</button>
`).join('');
}catch(e){}
}
}

if(type==='main'){
document.getElementById('secondarySection').style.display='block';
}
}

function selectMotif(tableName,motifId,nomMotif,type,btnElement){
if(type==='main'){
document.querySelectorAll('.motif-btn.principal').forEach(btn=>btn.classList.remove('principal'));
state.motifPrincipal={table:tableName,id:motifId,nom:nomMotif};
btnElement.classList.add('principal');
document.getElementById('generateTop').disabled=false;
document.getElementById('generateBottom').disabled=false;
toast(`‚úì Motif principal: ${nomMotif}`);
}else{
if(btnElement.classList.contains('secondaire')){
btnElement.classList.remove('secondaire');
state.motifsSecondaires=state.motifsSecondaires.filter(m=>m.id!==motifId);
toast('‚úó Motif secondaire retir√©');
}else{
btnElement.classList.add('secondaire');
state.motifsSecondaires.push({table:tableName,id:motifId,nom:nomMotif});
toast(`‚úì Motif secondaire: ${nomMotif}`);
}
}
}

async function generateConclusion(){
if(!state.motifPrincipal){
toast('‚ö†Ô∏è S√©lectionnez un motif principal','error');
return;
}

toast('‚è≥ G√©n√©ration...');

try{
const r=await fetch(`${API_URL}/fusion`,{
method:'POST',
headers:{'Content-Type':'application/json'},
body:JSON.stringify({
table_principale:state.motifPrincipal.table,
motif_principal_id:state.motifPrincipal.id,
motifs_secondaires:state.motifsSecondaires
})
});

if(!r.ok)throw new Error('Erreur API');

state.conclusion=await r.json();
renderConclusion();
toast('‚úÖ G√©n√©r√© !');
document.getElementById('floatingActions').style.display='flex';
}catch(e){
toast('‚ùå Erreur','error');
console.error(e);
}
}

function renderConclusion(){
let html='';

state.conclusion.modules.forEach(module=>{
let content='';

if(module.type==='conduite_tenir'){
state.conduiteLines=module.lignes.map((ligne,i)=>({id:Date.now()+i,text:ligne}));
content=renderConduiteATenir();
}else{
// CRITIQUE : Afficher chaque ligne s√©par√©ment avec <div>
content=module.lignes.map(ligne=>{
let l=ligne.replace(/XXXX/g,'<span class="xxxx" onclick="openXXXXModal(this)">XXXX</span>');
return `<div class="module-line">${l}</div>`;
}).join('');
}

const bullesHtml=module.bulles&&module.bulles.length>0?`
<div class="bulles-container">
${module.bulles.map(bulle=>`
<button class="bulle-btn" onclick='showBulle(${JSON.stringify(bulle)})'>
üí° ${bulle.titre}
</button>
`).join('')}
</div>
`:'';

html+=`
<div class="module">
<div class="module-header">
<span class="module-title">${module.icon} ${module.titre}</span>
${bullesHtml}
</div>
<div class="module-content" contenteditable="${module.type!=='conduite_tenir'}">
${content}
</div>
${module.type==='conduite_tenir'?renderOrdonnancesSection():''}
</div>
`;
});

if(state.conclusion.codes_cim&&state.conclusion.codes_cim.length>0){
html+=`
<div class="codes-section">
<h3>üìä Suggestion CIM-10</h3>
${state.conclusion.codes_cim.map(code=>`
<div class="code-item"><strong>${code.code}</strong> : ${code.libelle}</div>
`).join('')}
</div>
`;
}

document.getElementById('resultContainer').innerHTML=html;
}

function renderConduiteATenir(){
return state.conduiteLines.map((line,idx)=>`
<div class="conduite-line">
<div class="conduite-number">${idx+1}.</div>
<div class="conduite-text">${line.text.replace(/XXXX/g,'<span class="xxxx" onclick="openXXXXModal(this)">XXXX</span>')}</div>
<div class="conduite-actions">
<button class="action-icon action-up" onclick="moveLineUp(${idx})">‚Üë</button>
<button class="action-icon action-down" onclick="moveLineDown(${idx})">‚Üì</button>
<button class="action-icon action-delete" onclick="deleteLine(${idx})">üóë</button>
</div>
</div>
`).join('');
}

function moveLineUp(idx){
if(idx===0)return;
[state.conduiteLines[idx],state.conduiteLines[idx-1]]=[state.conduiteLines[idx-1],state.conduiteLines[idx]];
renderConclusion();
}

function moveLineDown(idx){
if(idx===state.conduiteLines.length-1)return;
[state.conduiteLines[idx],state.conduiteLines[idx+1]]=[state.conduiteLines[idx+1],state.conduiteLines[idx]];
renderConclusion();
}

function deleteLine(idx){
state.conduiteLines.splice(idx,1);
renderConclusion();
}

function renderOrdonnancesSection(){
if(!state.conclusion.ordonnances||state.conclusion.ordonnances.length===0)return'';

return`
<div class="ordonnances-section">
<strong>üíä Ordonnances disponibles</strong><br>
<button class="ordo-btn all" onclick="loadAllOrdonnances()">üìã Toutes</button>
${state.conclusion.ordonnances.map((ordo,i)=>`
<button class="ordo-btn" onclick="showOrdonnance(${i})">${ordo.titre}</button>
`).join('')}
</div>
`;
}

function showOrdonnance(idx){
const ordo=state.conclusion.ordonnances[idx];
// CRITIQUE : Afficher chaque ligne avec <div>
const content=ordo.lignes.map(ligne=>
`<div class="module-line">${ligne.replace(/XXXX/g,'<span class="xxxx" onclick="openXXXXModal(this)">XXXX</span>')}</div>`
).join('');

document.getElementById('ordoModal').innerHTML=`
<div class="modal-content">
<div class="modal-header">
<span>${ordo.titre}</span>
<span class="modal-close" onclick="closeModal('ordoModal')">√ó</span>
</div>
<div>${content}</div>
<div class="modal-buttons">
<button class="modal-btn modal-btn-secondary" onclick="closeModal('ordoModal')">Fermer</button>
<button class="modal-btn modal-btn-primary" onclick="copyText('${ordo.lignes.join('\\n').replace(/'/g,"\\'")}')">üìã Copier</button>
</div>
</div>
`;
document.getElementById('ordoModal').classList.add('active');
}

async function loadAllOrdonnances(){
toast('‚è≥ Chargement...');
state.allOrdonnances=[];

try{
for(const cat of state.categories){
const mr=await fetch(`${API_URL}/motifs/${cat.table_name}`);
const motifs=await mr.json();

for(const motif of motifs){
const fr=await fetch(`${API_URL}/fusion`,{
method:'POST',
headers:{'Content-Type':'application/json'},
body:JSON.stringify({
table_principale:cat.table_name,
motif_principal_id:motif.id,
motifs_secondaires:[]
})
});

const fd=await fr.json();

if(fd.ordonnances){
fd.ordonnances.forEach(ordo=>{
state.allOrdonnances.push({
categorie:cat.nom,
motif:motif.nom_motif,
ordonnance:ordo
});
});
}
}
}

renderAllOrdonnances();
toast('‚úÖ Charg√©');
}catch(e){
toast('‚ùå Erreur','error');
}
}

function renderAllOrdonnances(){
const categories=[...new Set(state.allOrdonnances.map(o=>o.categorie))];

document.getElementById('allOrdosModal').innerHTML=`
<div class="modal-content">
<div class="modal-header">
<span>üìã Toutes les Ordonnances</span>
<span class="modal-close" onclick="closeModal('allOrdosModal')">√ó</span>
</div>
<div class="ordo-filters">
<div class="ordo-filter">
<label>Cat√©gorie</label>
<select id="catFilter" onchange="filterAllOrdonnances()">
<option value="">Toutes</option>
${categories.map(c=>`<option value="${c}">${c}</option>`).join('')}
</select>
</div>
<div class="ordo-filter">
<label>Motif</label>
<select id="motifFilter" onchange="filterAllOrdonnances()">
<option value="">Tous</option>
</select>
</div>
</div>
<div id="ordosList"></div>
</div>
`;

filterAllOrdonnances();
document.getElementById('allOrdosModal').classList.add('active');
}

function filterAllOrdonnances(){
const catFilter=document.getElementById('catFilter').value;
const motifFilter=document.getElementById('motifFilter').value;

let filtered=state.allOrdonnances;

if(catFilter){
filtered=filtered.filter(o=>o.categorie===catFilter);
const motifs=[...new Set(filtered.map(o=>o.motif))];
document.getElementById('motifFilter').innerHTML=
'<option value="">Tous</option>'+
motifs.map(m=>`<option value="${m}">${m}</option>`).join('');
}else{
document.getElementById('motifFilter').innerHTML='<option value="">Tous</option>';
}

if(motifFilter)filtered=filtered.filter(o=>o.motif===motifFilter);

document.getElementById('ordosList').innerHTML=filtered.map((item,idx)=>`
<div class="ordo-item" onclick="openOrdonnanceFromList(${idx},'${catFilter}','${motifFilter}')">
<div class="ordo-item-header">${item.ordonnance.titre} - ${item.motif} (${item.categorie})</div>
</div>
`).join('');
}

function openOrdonnanceFromList(idx,catFilter,motifFilter){
let filtered=state.allOrdonnances;
if(catFilter)filtered=filtered.filter(o=>o.categorie===catFilter);
if(motifFilter)filtered=filtered.filter(o=>o.motif===motifFilter);

const item=filtered[idx];
// CRITIQUE : Afficher chaque ligne avec <div>
const content=item.ordonnance.lignes.map(ligne=>
`<div class="module-line">${ligne.replace(/XXXX/g,'<span class="xxxx" onclick="openXXXXModal(this)">XXXX</span>')}</div>`
).join('');

closeModal('allOrdosModal');

document.getElementById('ordoModal').innerHTML=`
<div class="modal-content">
<div class="modal-header">
<span>${item.ordonnance.titre}</span>
<span class="modal-close" onclick="closeModal('ordoModal')">√ó</span>
</div>
<div>${content}</div>
<div class="modal-buttons">
<button class="modal-btn modal-btn-secondary" onclick="closeModal('ordoModal')">Fermer</button>
<button class="modal-btn modal-btn-primary" onclick="copyText('${item.ordonnance.lignes.join('\\n').replace(/'/g,"\\'")}')">üìã Copier</button>
</div>
</div>
`;
document.getElementById('ordoModal').classList.add('active');
}

function showBulle(bulle){
document.getElementById('bulleModal').innerHTML=`
<div class="modal-content modal-bulle">
<div class="modal-header">
<span>üí° ${bulle.titre}</span>
<span class="modal-close" onclick="closeModal('bulleModal')">√ó</span>
</div>
<div class="bulle-content">${bulle.contenu}</div>
</div>
`;
document.getElementById('bulleModal').classList.add('active');
}

function openXXXXModal(element){
element.id='xxxx-'+Date.now();

document.getElementById('xxxxModal').innerHTML=`
<div class="modal-content">
<div class="modal-header">
<span>Remplir le champ</span>
<span class="modal-close" onclick="closeModal('xxxxModal')">√ó</span>
</div>
<input type="text" id="xxxxInput" class="modal-input" placeholder="Entrez...">
<div class="modal-buttons">
<button class="modal-btn modal-btn-secondary" onclick="closeModal('xxxxModal')">Annuler</button>
<button class="modal-btn modal-btn-primary" onclick="validateXXXX('${element.id}')">‚úì Valider</button>
</div>
</div>
`;
document.getElementById('xxxxModal').classList.add('active');
document.getElementById('xxxxInput').focus();
}

function validateXXXX(elementId){
const value=document.getElementById('xxxxInput').value.trim();
if(value){
const element=document.getElementById(elementId);
if(element){
element.textContent=value;
element.classList.remove('xxxx');
element.style.background='transparent';
element.style.border='none';
element.style.color='#e0e0e0';
}
}
closeModal('xxxxModal');
}

function closeModal(modalId){
document.getElementById(modalId).classList.remove('active');
}

function copyText(text){
navigator.clipboard.writeText(text);
toast('‚úÖ Copi√© !');
}

function copyAll(){
if(!state.conclusion)return;
let text='';
state.conclusion.modules.forEach(module=>{
text+=`${module.titre}\n\n${module.lignes.join('\n')}\n\n`;
});
copyText(text);
}

function resetAll(){
state={categories:state.categories,motifPrincipal:null,motifsSecondaires:[],conclusion:null,conduiteLines:[],allOrdonnances:[]};
document.querySelectorAll('.category-btn,.motif-btn').forEach(btn=>btn.classList.remove('active','principal','secondaire'));
document.querySelectorAll('.motifs-list').forEach(list=>list.classList.remove('active'));
document.getElementById('generateTop').disabled=true;
document.getElementById('generateBottom').disabled=true;
document.getElementById('floatingActions').style.display='none';
document.getElementById('secondarySection').style.display='none';
document.getElementById('resultContainer').innerHTML='<div class="empty-state"><div style="font-size:64px;margin-bottom:20px">üìù</div><h3>Aucune conclusion g√©n√©r√©e</h3><p>S√©lectionnez un motif principal et cliquez sur "G√©n√©rer"</p></div>';
toast('üîÑ R√©initialis√©');
}

function toast(message,type='info'){
const toastEl=document.createElement('div');
toastEl.className='toast';
toastEl.textContent=message;
if(type==='error')toastEl.style.borderColor='#ef4444';
document.body.appendChild(toastEl);
setTimeout(()=>toastEl.remove(),3000);
}

window.addEventListener('click',(e)=>{
if(e.target.classList.contains('modal'))e.target.classList.remove('active');
});
</script>
</body>
</html>
